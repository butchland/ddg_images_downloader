---

title: Duckduckgo Image Downloader 

keywords: fastai
sidebar: home_sidebar

summary: "Provides an image downloader using duckduckgo image search."
description: "Provides an image downloader using duckduckgo image search."
nb_path: "00_images.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_images.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>(Optional) Run the following command to setup fastai in Colab</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="ch">#!curl https://course.fast.ai/setup/colab | bash</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Setup-Instructions">Setup Instructions<a class="anchor-link" href="#Setup-Instructions"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Install Chrome Driver (done one-time per environment only)</li>
</ol>
<p><strong>Make sure that chrome and chromedriver are both accessible in the PATH variable</strong></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># install chromium, its driver</span>
<span class="o">!</span>apt-get update
<span class="o">!</span>apt install chromium-chromedriver
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>Install python libraries (done one-time per environment only)</li>
</ol>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># install python libraries and fastai2</span>
<span class="o">!</span>pip install selenium
<span class="o">!</span>pip install beautifulsoup4
<span class="o">!</span>pip install html5lib
<span class="o">!</span>pip install fastcore
<span class="o">!</span>pip install fastai
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>In the actual usage, running the following pip install will install all the requirements so the above step to install the required libraries will be a redundant step</strong></p>

<pre><code>pip install git+https://github.com/butchland/ddg_images_downloader.git</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Setup-selenium-webdriver-to-use-headless-Chrome">Setup selenium webdriver to use headless Chrome<a class="anchor-link" href="#Setup-selenium-webdriver-to-use-headless-Chrome"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Automate-search-via-selenium-accessing-DDG-Image-Search">Automate search via selenium accessing DDG Image Search<a class="anchor-link" href="#Automate-search-via-selenium-accessing-DDG-Image-Search"> </a></h4><blockquote><p>The following methods fetch the image urls retrieved from DDG Image Search into files</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastcore.test</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">operator</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">page_source</span> <span class="o">=</span> <span class="n">get_browser_page</span><span class="p">(</span><span class="s1">&#39;coconut fruit&#39;</span><span class="p">,</span><span class="n">scroll_count</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">sleep</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span><span class="nb">len</span><span class="p">(</span><span class="n">page_source</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>447170</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_ne</span><span class="p">(</span><span class="n">page_source</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">page_source</span><span class="p">),</span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;a string&#39;</span><span class="p">))</span>
<span class="n">test_ne</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">page_source</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">page_source</span> <span class="o">=</span> <span class="n">get_browser_page</span><span class="p">(</span><span class="s1">&#39;teddy bear&#39;</span><span class="p">);</span><span class="nb">len</span><span class="p">(</span><span class="n">page_source</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>843251</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">img_elts</span> <span class="o">=</span> <span class="n">extract_images</span><span class="p">(</span><span class="n">page_source</span><span class="p">);</span><span class="nb">len</span><span class="p">(</span><span class="n">img_elts</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>736</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_ne</span><span class="p">(</span><span class="n">img_elts</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span>
<span class="n">test_ne</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">img_elts</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">img_urls</span> <span class="o">=</span> <span class="n">extract_img_urls</span><span class="p">(</span><span class="n">img_elts</span><span class="p">);</span><span class="nb">len</span><span class="p">(</span><span class="n">img_urls</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>736</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">(</span><span class="n">img_urls</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">img_urls</span><span class="p">[</span><span class="mi">50</span><span class="p">],</span> <span class="n">img_urls</span><span class="p">[</span><span class="mi">99</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(&#39;https://tse2.mm.bing.net/th?id=OIP.1U8UEYu_GHNSEKHqWHKRzgHaHa&amp;pid=Api&amp;f=1&#39;,
 &#39;https://tse3.mm.bing.net/th?id=OIP.XDaRobDwpBbfJfVIBotOfQHaIM&amp;pid=Api&amp;f=1&#39;,
 &#39;https://tse4.mm.bing.net/th?id=OIP.o4v5D8fRplBh1ExN0Wf9_AHaJ4&amp;pid=Api&amp;f=1&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">img_urls</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span><span class="n">img_urls</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="mi">8</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Get-Image-URLs">Get Image URLs<a class="anchor-link" href="#Get-Image-URLs"> </a></h4><blockquote><p>get image urls given a search string while scrolling down (with sleep in between scrolls)</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_image_urls" class="doc_header"><code>get_image_urls</code><a href="https://github.com/butchland/ddg_images_downloader/tree/master/ddg_images_downloader/images.py#L76" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_image_urls</code>(<strong><code>search_string</code></strong>, <strong><code>options</code></strong>=<em><code>&lt;selenium.webdriver.chrome.options.Options object at 0x119fecdd0&gt;</code></em>, <strong><code>scroll_count</code></strong>=<em><code>20</code></em>, <strong><code>sleep</code></strong>=<em><code>3</code></em>)</p>
</blockquote>
<p>get image urls with <code>search_string</code> and scroll down <code>scroll_count</code> times with a delay of <code>sleep</code> seconds returns a list of urls</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">img_urls</span> <span class="o">=</span> <span class="n">get_image_urls</span><span class="p">(</span><span class="s1">&#39;apple fruit&#39;</span><span class="p">,</span> <span class="n">scroll_count</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">sleep</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">img_urls</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="n">img_urls</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="mi">8</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Download-search-terms-retrieved-image-urls-into-files">Download search terms retrieved image urls into files<a class="anchor-link" href="#Download-search-terms-retrieved-image-urls-into-files"> </a></h4><blockquote><p>This will download each search term into a separate file</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_search_url" class="doc_header"><code>download_search_url</code><a href="https://github.com/butchland/ddg_images_downloader/tree/master/ddg_images_downloader/images.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_search_url</code>(<strong><code>search_item</code></strong>, <strong><code>file_path</code></strong>, <strong><code>options</code></strong>=<em><code>&lt;selenium.webdriver.chrome.options.Options object at 0x119fecdd0&gt;</code></em>, <strong><code>scroll_count</code></strong>=<em><code>20</code></em>, <strong><code>sleep</code></strong>=<em><code>3</code></em>)</p>
</blockquote>
<p>download image url search results for a search item <code>search_item</code> into a file <code>file_path</code></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_search_urls" class="doc_header"><code>download_search_urls</code><a href="https://github.com/butchland/ddg_images_downloader/tree/master/ddg_images_downloader/images.py#L98" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_search_urls</code>(<strong><code>path</code></strong>, <strong><code>search_terms</code></strong>, <strong><code>search_pattern</code></strong>, <strong><code>file_pattern</code></strong>=<em><code>'{0}.txt'</code></em>, <strong><code>options</code></strong>=<em><code>&lt;selenium.webdriver.chrome.options.Options object at 0x119fecdd0&gt;</code></em>, <strong><code>scroll_count</code></strong>=<em><code>20</code></em>, <strong><code>sleep</code></strong>=<em><code>3</code></em>)</p>
</blockquote>
<p>download search results into a file in named after search string</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Example">Example<a class="anchor-link" href="#Example"> </a></h4><blockquote><p>Download Bear Images for fastai lesson on creating your own dataset using bears</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">fastcore.utils</span> <span class="kn">import</span> <span class="o">*</span> <span class="c1"># decorate path</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>rm -rf bears
<span class="n">bear_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;grizzly&#39;</span><span class="p">,</span><span class="s1">&#39;black&#39;</span><span class="p">,</span><span class="s1">&#39;teddy&#39;</span><span class="p">]</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bears&#39;</span><span class="p">)</span>
<span class="n">download_search_urls</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">bear_types</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> bear&#39;</span><span class="p">,</span> <span class="n">scroll_count</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bear_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;panda&#39;</span><span class="p">]</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bears&#39;</span><span class="p">)</span>
<span class="n">download_search_urls</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">bear_types</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> bear&#39;</span><span class="p">,</span> <span class="n">scroll_count</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>panda bear 360
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bear_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">ls</span><span class="p">();</span><span class="n">bear_path</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(#3) [Path(&#39;bears/.DS_Store&#39;),Path(&#39;bears/panda.txt&#39;),Path(&#39;bears/panda&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_is</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bears/panda.txt&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">bear_path</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Download-images-from-files-stored-in-path">Download images from files stored in path<a class="anchor-link" href="#Download-images-from-files-stored-in-path"> </a></h3><blockquote><p>The following methods retrieves the images from stored urls in a file.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Slow-version-of-download-images">Slow version of download images<a class="anchor-link" href="#Slow-version-of-download-images"> </a></h4><blockquote><p>This is to allow the program to not overwhelm the duckduckgo server with simultaneous requests
but allow it to pause the query with a configurable delay between image requests (default to 3 secs per batch)</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_images_slowly" class="doc_header"><code>download_images_slowly</code><a href="https://github.com/butchland/ddg_images_downloader/tree/master/ddg_images_downloader/images.py#L118" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_images_slowly</code>(<strong><code>dest</code></strong>, <strong><code>url_file</code></strong>=<em><code>None</code></em>, <strong><code>urls</code></strong>=<em><code>None</code></em>, <strong><code>max_pics</code></strong>=<em><code>1000</code></em>, <strong><code>delay</code></strong>=<em><code>3</code></em>, <strong><code>batch_size</code></strong>=<em><code>10</code></em>, <strong><code>timeout</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Download images listed in text file <code>url_file</code> to path <code>dest</code>, at most <code>max_pics</code> with a delay of <code>delay</code> secs for every batch of <code>batch_size</code> images with only 1 thread</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_search_images_slowly" class="doc_header"><code>download_search_images_slowly</code><a href="https://github.com/butchland/ddg_images_downloader/tree/master/ddg_images_downloader/images.py#L131" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_search_images_slowly</code>(<strong><code>path</code></strong>, <strong><code>search_terms</code></strong>, <strong><code>file_pattern</code></strong>=<em><code>'{0}.txt'</code></em>, <strong><code>max_pics</code></strong>=<em><code>1000</code></em>, <strong><code>delay</code></strong>=<em><code>3</code></em>, <strong><code>batch_size</code></strong>=<em><code>10</code></em>, <strong><code>timeout</code></strong>=<em><code>4</code></em>)</p>
</blockquote>
<p>Download images listed in text file for each item in <code>search_terms</code>  to path <code>dest</code>/item, at most <code>max_pics</code> with a delay of <code>delay</code> secs for every batch of <code>batch_size</code> images with only 1 thread</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">download_search_images_slowly</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">bear_types</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>downloaded:  0  dest:  bears/panda
downloaded:  10  dest:  bears/panda
downloaded:  20  dest:  bears/panda
downloaded:  30  dest:  bears/panda
downloaded:  40  dest:  bears/panda
downloaded:  50  dest:  bears/panda
downloaded:  60  dest:  bears/panda
downloaded:  70  dest:  bears/panda
downloaded:  80  dest:  bears/panda
downloaded:  90  dest:  bears/panda
downloaded:  100  dest:  bears/panda
downloaded:  110  dest:  bears/panda
downloaded:  120  dest:  bears/panda
downloaded:  130  dest:  bears/panda
downloaded:  140  dest:  bears/panda
downloaded:  150  dest:  bears/panda
downloaded:  160  dest:  bears/panda
downloaded:  170  dest:  bears/panda
downloaded:  180  dest:  bears/panda
downloaded:  190  dest:  bears/panda
downloaded:  200  dest:  bears/panda
downloaded:  210  dest:  bears/panda
downloaded:  220  dest:  bears/panda
downloaded:  230  dest:  bears/panda
downloaded:  240  dest:  bears/panda
downloaded:  250  dest:  bears/panda
</pre>
</div>
</div>

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/urllib3/connectionpool.py</span> in <span class="ansi-cyan-fg">_make_request</span><span class="ansi-blue-fg">(self, conn, method, url, timeout, chunked, **httplib_request_kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    376</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>  <span class="ansi-red-fg"># Python 2.7, use buffering of HTTP responses</span>
<span class="ansi-green-fg">--&gt; 377</span><span class="ansi-red-fg">                 </span>httplib_response <span class="ansi-blue-fg">=</span> conn<span class="ansi-blue-fg">.</span>getresponse<span class="ansi-blue-fg">(</span>buffering<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    378</span>             <span class="ansi-green-fg">except</span> TypeError<span class="ansi-blue-fg">:</span>  <span class="ansi-red-fg"># Python 3</span>

<span class="ansi-red-fg">TypeError</span>: getresponse() got an unexpected keyword argument &#39;buffering&#39;

During handling of the above exception, another exception occurred:

<span class="ansi-red-fg">KeyboardInterrupt</span>                         Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-31-763f5cd1cc64&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-red-fg"># slow</span>
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg"> </span>download_search_images_slowly<span class="ansi-blue-fg">(</span>path<span class="ansi-blue-fg">,</span>bear_types<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-29-23ee06a2c753&gt;</span> in <span class="ansi-cyan-fg">download_search_images_slowly</span><span class="ansi-blue-fg">(path, search_terms, file_pattern, max_pics, delay, batch_size, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span>     <span class="ansi-green-fg">for</span> o <span class="ansi-green-fg">in</span> search_terms<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span>         download_images_slowly(path/o,path/file_pattern.format(o),max_pics=max_pics, delay=delay,
<span class="ansi-green-fg">----&gt; 7</span><span class="ansi-red-fg">                                batch_size=batch_size, timeout=timeout)
</span>
<span class="ansi-green-fg">&lt;ipython-input-28-b8bf9be0d0a3&gt;</span> in <span class="ansi-cyan-fg">download_images_slowly</span><span class="ansi-blue-fg">(dest, url_file, urls, max_pics, delay, batch_size, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>     <span class="ansi-green-fg">for</span> inp <span class="ansi-green-fg">in</span> enumerate<span class="ansi-blue-fg">(</span>urls<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>         i<span class="ansi-blue-fg">,</span>_ <span class="ansi-blue-fg">=</span> inp
<span class="ansi-green-fg">----&gt; 9</span><span class="ansi-red-fg">         </span>download_image_inner<span class="ansi-blue-fg">(</span>dest<span class="ansi-blue-fg">,</span>inp<span class="ansi-blue-fg">,</span>timeout<span class="ansi-blue-fg">=</span>timeout<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span>         <span class="ansi-green-fg">if</span> i <span class="ansi-blue-fg">%</span> batch_size <span class="ansi-blue-fg">==</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">     11</span>             print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">f&#39;downloaded: &#39;</span><span class="ansi-blue-fg">,</span> i<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#39; dest: &#39;</span><span class="ansi-blue-fg">,</span> dest<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-27-411c8e2db324&gt;</span> in <span class="ansi-cyan-fg">download_image_inner</span><span class="ansi-blue-fg">(dest, inp, timeout)</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>     suffix <span class="ansi-blue-fg">=</span> re<span class="ansi-blue-fg">.</span>findall<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">r&#39;\.\w+?(?=(?:\?|$))&#39;</span><span class="ansi-blue-fg">,</span> url<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>     suffix <span class="ansi-blue-fg">=</span> suffix<span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span> <span class="ansi-green-fg">if</span> len<span class="ansi-blue-fg">(</span>suffix<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">&gt;</span><span class="ansi-cyan-fg">0</span>  <span class="ansi-green-fg">else</span> <span class="ansi-blue-fg">&#39;.jpg&#39;</span>
<span class="ansi-green-fg">----&gt; 9</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span> download_url<span class="ansi-blue-fg">(</span>url<span class="ansi-blue-fg">,</span> dest<span class="ansi-blue-fg">/</span><span class="ansi-blue-fg">f&#34;{i:08d}{suffix}&#34;</span><span class="ansi-blue-fg">,</span> overwrite<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">,</span> show_progress<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span> timeout<span class="ansi-blue-fg">=</span>timeout<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">     10</span>     <span class="ansi-green-fg">except</span> Exception <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span> <span class="ansi-blue-fg">f&#34;Couldn&#39;t download {url}.&#34;</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/fastai/data/external.py</span> in <span class="ansi-cyan-fg">download_url</span><span class="ansi-blue-fg">(url, dest, overwrite, pbar, show_progress, chunk_size, timeout, retries)</span>
<span class="ansi-green-intense-fg ansi-bold">    161</span>     <span class="ansi-red-fg"># additional line to identify as a firefox browser, see fastai/#2438</span>
<span class="ansi-green-intense-fg ansi-bold">    162</span>     s<span class="ansi-blue-fg">.</span>headers<span class="ansi-blue-fg">.</span>update<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">{</span><span class="ansi-blue-fg">&#39;User-Agent&#39;</span><span class="ansi-blue-fg">:</span> <span class="ansi-blue-fg">&#39;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:71.0) Gecko/20100101 Firefox/71.0&#39;</span><span class="ansi-blue-fg">}</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 163</span><span class="ansi-red-fg">     </span>u <span class="ansi-blue-fg">=</span> s<span class="ansi-blue-fg">.</span>get<span class="ansi-blue-fg">(</span>url<span class="ansi-blue-fg">,</span> stream<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">,</span> timeout<span class="ansi-blue-fg">=</span>timeout<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    164</span>     <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span> file_size <span class="ansi-blue-fg">=</span> int<span class="ansi-blue-fg">(</span>u<span class="ansi-blue-fg">.</span>headers<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#34;Content-Length&#34;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    165</span>     <span class="ansi-green-fg">except</span><span class="ansi-blue-fg">:</span> show_progress <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">False</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/requests/sessions.py</span> in <span class="ansi-cyan-fg">get</span><span class="ansi-blue-fg">(self, url, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    541</span> 
<span class="ansi-green-intense-fg ansi-bold">    542</span>         kwargs<span class="ansi-blue-fg">.</span>setdefault<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;allow_redirects&#39;</span><span class="ansi-blue-fg">,</span> <span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 543</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>request<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;GET&#39;</span><span class="ansi-blue-fg">,</span> url<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    544</span> 
<span class="ansi-green-intense-fg ansi-bold">    545</span>     <span class="ansi-green-fg">def</span> options<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> url<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/requests/sessions.py</span> in <span class="ansi-cyan-fg">request</span><span class="ansi-blue-fg">(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, stream, verify, cert, json)</span>
<span class="ansi-green-intense-fg ansi-bold">    528</span>         }
<span class="ansi-green-intense-fg ansi-bold">    529</span>         send_kwargs<span class="ansi-blue-fg">.</span>update<span class="ansi-blue-fg">(</span>settings<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">--&gt; 530</span><span class="ansi-red-fg">         </span>resp <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>send<span class="ansi-blue-fg">(</span>prep<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>send_kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    531</span> 
<span class="ansi-green-intense-fg ansi-bold">    532</span>         <span class="ansi-green-fg">return</span> resp

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/requests/sessions.py</span> in <span class="ansi-cyan-fg">send</span><span class="ansi-blue-fg">(self, request, **kwargs)</span>
<span class="ansi-green-intense-fg ansi-bold">    641</span> 
<span class="ansi-green-intense-fg ansi-bold">    642</span>         <span class="ansi-red-fg"># Send the request</span>
<span class="ansi-green-fg">--&gt; 643</span><span class="ansi-red-fg">         </span>r <span class="ansi-blue-fg">=</span> adapter<span class="ansi-blue-fg">.</span>send<span class="ansi-blue-fg">(</span>request<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">**</span>kwargs<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    644</span> 
<span class="ansi-green-intense-fg ansi-bold">    645</span>         <span class="ansi-red-fg"># Total elapsed time of the request (approximately)</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/requests/adapters.py</span> in <span class="ansi-cyan-fg">send</span><span class="ansi-blue-fg">(self, request, stream, timeout, verify, cert, proxies)</span>
<span class="ansi-green-intense-fg ansi-bold">    447</span>                     decode_content<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">False</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    448</span>                     retries<span class="ansi-blue-fg">=</span>self<span class="ansi-blue-fg">.</span>max_retries<span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">--&gt; 449</span><span class="ansi-red-fg">                     </span>timeout<span class="ansi-blue-fg">=</span>timeout
<span class="ansi-green-intense-fg ansi-bold">    450</span>                 )
<span class="ansi-green-intense-fg ansi-bold">    451</span> 

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/urllib3/connectionpool.py</span> in <span class="ansi-cyan-fg">urlopen</span><span class="ansi-blue-fg">(self, method, url, body, headers, retries, redirect, assert_same_host, timeout, pool_timeout, release_conn, chunked, body_pos, **response_kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    598</span>                                                   timeout<span class="ansi-blue-fg">=</span>timeout_obj<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    599</span>                                                   body<span class="ansi-blue-fg">=</span>body<span class="ansi-blue-fg">,</span> headers<span class="ansi-blue-fg">=</span>headers<span class="ansi-blue-fg">,</span>
<span class="ansi-green-fg">--&gt; 600</span><span class="ansi-red-fg">                                                   chunked=chunked)
</span><span class="ansi-green-intense-fg ansi-bold">    601</span> 
<span class="ansi-green-intense-fg ansi-bold">    602</span>             <span class="ansi-red-fg"># If we&#39;re going to release the connection in ``finally:``, then</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/site-packages/urllib3/connectionpool.py</span> in <span class="ansi-cyan-fg">_make_request</span><span class="ansi-blue-fg">(self, conn, method, url, timeout, chunked, **httplib_request_kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    378</span>             <span class="ansi-green-fg">except</span> TypeError<span class="ansi-blue-fg">:</span>  <span class="ansi-red-fg"># Python 3</span>
<span class="ansi-green-intense-fg ansi-bold">    379</span>                 <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 380</span><span class="ansi-red-fg">                     </span>httplib_response <span class="ansi-blue-fg">=</span> conn<span class="ansi-blue-fg">.</span>getresponse<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    381</span>                 <span class="ansi-green-fg">except</span> Exception <span class="ansi-green-fg">as</span> e<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    382</span>                     <span class="ansi-red-fg"># Remove the TypeError from the exception chain in Python 3;</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/http/client.py</span> in <span class="ansi-cyan-fg">getresponse</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1342</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1343</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 1344</span><span class="ansi-red-fg">                 </span>response<span class="ansi-blue-fg">.</span>begin<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1345</span>             <span class="ansi-green-fg">except</span> ConnectionError<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1346</span>                 self<span class="ansi-blue-fg">.</span>close<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/http/client.py</span> in <span class="ansi-cyan-fg">begin</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    304</span>         <span class="ansi-red-fg"># read until we get a non-100 response</span>
<span class="ansi-green-intense-fg ansi-bold">    305</span>         <span class="ansi-green-fg">while</span> <span class="ansi-green-fg">True</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 306</span><span class="ansi-red-fg">             </span>version<span class="ansi-blue-fg">,</span> status<span class="ansi-blue-fg">,</span> reason <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>_read_status<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    307</span>             <span class="ansi-green-fg">if</span> status <span class="ansi-blue-fg">!=</span> CONTINUE<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    308</span>                 <span class="ansi-green-fg">break</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/http/client.py</span> in <span class="ansi-cyan-fg">_read_status</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    265</span> 
<span class="ansi-green-intense-fg ansi-bold">    266</span>     <span class="ansi-green-fg">def</span> _read_status<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 267</span><span class="ansi-red-fg">         </span>line <span class="ansi-blue-fg">=</span> str<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">.</span>fp<span class="ansi-blue-fg">.</span>readline<span class="ansi-blue-fg">(</span>_MAXLINE <span class="ansi-blue-fg">+</span> <span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;iso-8859-1&#34;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    268</span>         <span class="ansi-green-fg">if</span> len<span class="ansi-blue-fg">(</span>line<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">&gt;</span> _MAXLINE<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    269</span>             <span class="ansi-green-fg">raise</span> LineTooLong<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#34;status line&#34;</span><span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/socket.py</span> in <span class="ansi-cyan-fg">readinto</span><span class="ansi-blue-fg">(self, b)</span>
<span class="ansi-green-intense-fg ansi-bold">    587</span>         <span class="ansi-green-fg">while</span> <span class="ansi-green-fg">True</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    588</span>             <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 589</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>_sock<span class="ansi-blue-fg">.</span>recv_into<span class="ansi-blue-fg">(</span>b<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    590</span>             <span class="ansi-green-fg">except</span> timeout<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    591</span>                 self<span class="ansi-blue-fg">.</span>_timeout_occurred <span class="ansi-blue-fg">=</span> <span class="ansi-green-fg">True</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/ssl.py</span> in <span class="ansi-cyan-fg">recv_into</span><span class="ansi-blue-fg">(self, buffer, nbytes, flags)</span>
<span class="ansi-green-intense-fg ansi-bold">   1069</span>                   <span class="ansi-blue-fg">&#34;non-zero flags not allowed in calls to recv_into() on %s&#34;</span> <span class="ansi-blue-fg">%</span>
<span class="ansi-green-intense-fg ansi-bold">   1070</span>                   self.__class__)
<span class="ansi-green-fg">-&gt; 1071</span><span class="ansi-red-fg">             </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span>nbytes<span class="ansi-blue-fg">,</span> buffer<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1072</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">   1073</span>             <span class="ansi-green-fg">return</span> super<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">.</span>recv_into<span class="ansi-blue-fg">(</span>buffer<span class="ansi-blue-fg">,</span> nbytes<span class="ansi-blue-fg">,</span> flags<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">~/anaconda3/envs/fastai2/lib/python3.7/ssl.py</span> in <span class="ansi-cyan-fg">read</span><span class="ansi-blue-fg">(self, len, buffer)</span>
<span class="ansi-green-intense-fg ansi-bold">    927</span>         <span class="ansi-green-fg">try</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    928</span>             <span class="ansi-green-fg">if</span> buffer <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">not</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">--&gt; 929</span><span class="ansi-red-fg">                 </span><span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>_sslobj<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span>len<span class="ansi-blue-fg">,</span> buffer<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    930</span>             <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    931</span>                 <span class="ansi-green-fg">return</span> self<span class="ansi-blue-fg">.</span>_sslobj<span class="ansi-blue-fg">.</span>read<span class="ansi-blue-fg">(</span>len<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">KeyboardInterrupt</span>: </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">bear_path</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
<span class="n">test_is</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;bears/panda&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">bear_path</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="n">panda_bears</span> <span class="o">=</span> <span class="p">(</span><span class="n">path</span><span class="o">/</span><span class="s1">&#39;panda&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ls</span><span class="p">()</span>
<span class="n">test</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">panda_bears</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="n">operator</span><span class="o">.</span><span class="n">gt</span><span class="p">)</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">panda_bears</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()[:</span><span class="mi">14</span><span class="p">],</span><span class="s1">&#39;bears/panda/00&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nbdev.export</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">notebook2script</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

